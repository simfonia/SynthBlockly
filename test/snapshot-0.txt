=== SNAPSHOT: 01_Melody and Chord.xml ===
// Variable Declarations



// Other Definitions



// Function Definitions



// Instrument Creation

/* INSTRUMENT_DEFINITION:DefaultSynth */
  window.audioEngine.createInstrument('DefaultSynth', 'PolySynth');
  (function(){ const t='DefaultSynth'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.1,sustain:0.5,release:1,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();



// Setup & Configuration

/* MASTER_DEFINITION */
  /* EFFECT_CONFIG:{"type":"limiter","params":{"threshold":-1},"target":"Master"} */window.audioEngine.addEffectToChain(Object.assign({"type":"limiter","params":{"threshold":-1},"target":"Master"}, { target: 'Master' }));



// Main Execution

window.audioEngine.Tone.Transport.bpm.value = 60;
await window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('C4').toNote(), '4n', (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), Number(1));
await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4n').toMilliseconds()));
if (!window.audioEngine.isExecutionActive) return;
await window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('D4').toNote(), '4n', (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), Number(1));
await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4n').toMilliseconds()));
if (!window.audioEngine.isExecutionActive) return;
window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('C4').toNote(), '8n', (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined), Number(1));
window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('E4').toNote(), '8n', (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined), Number(1));
window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('G5').toNote(), '8n', (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined), Number(1));

await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('2n').toMilliseconds()));
if (!window.audioEngine.isExecutionActive) return;
window.audioEngine.Tone.Transport.bpm.value = 120;
await window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('C4').toNote(), '4n', (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), Number(1));
await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4n').toMilliseconds()));
if (!window.audioEngine.isExecutionActive) return;
await window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('D4').toNote(), '4n', (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), Number(1));
await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4n').toMilliseconds()));
if (!window.audioEngine.isExecutionActive) return;
window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('C4').toNote(), '8n', (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined), Number(1));
window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('E4').toNote(), '8n', (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined), Number(1));
window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('G5').toNote(), '8n', (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined), Number(1));

await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('2n').toMilliseconds()));
if (!window.audioEngine.isExecutionActive) return;
window.audioEngine.Tone.Transport.bpm.value = 80;

        {
            var chordNotesArray = 'C4,E4,G4,B4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['CM7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'CM7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'CM7');
            }
        }
        
        {
            var chordNotesArray = 'D4,F4,A4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['Dm'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'Dm', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'Dm');
            }
        }
        
        {
            var chordNotesArray = 'F3,A3,E4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['FM7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'FM7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'FM7');
            }
        }
        await window.audioEngine.playMelodyString("RQ   C4Q D4Q.   E4E \nCM7H.                 RQ\nRQ C5Q B4Q.  G4E\nDmH      FM7H");


=== SNAPSHOT: 02_Rock.xml ===
// Variable Declarations

var note, velocity, channel;

// Other Definitions

window.blocklyLoops = window.blocklyLoops || {};

// Function Definitions



// Instrument Creation

/* INSTRUMENT_DEFINITION:DefaultSynth */
  window.audioEngine.createInstrument('DefaultSynth', 'PolySynth');
  (function(){ const t='DefaultSynth'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.1,sustain:0.2,release:0.5,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();

/* INSTRUMENT_DEFINITION:Piano */
  window.audioEngine.createCustomSampler('Piano', { "C4": "C4.mp3" }, "https://tonejs.github.io/audio/salamander/", { attack: 0.02, decay: 0.5, sustain: 0.5, release: 1.0 });



// Setup & Configuration

/* MASTER_DEFINITION */
  /* EFFECT_CONFIG:{"type":"limiter","params":{"threshold":-5},"target":"Master"} */window.audioEngine.addEffectToChain(Object.assign({"type":"limiter","params":{"threshold":-5},"target":"Master"}, { target: 'Master' }));



// Main Execution

window.audioEngine.enablePcKeyboardMidi();
window.audioEngine.Tone.Transport.bpm.value = 80;
await window.audioEngine.playCountIn(1, 4, 4, 0.8);

if (window.blocklyLoops['loop_main_drum_loop']) {
    window.blocklyLoops['loop_main_drum_loop'].dispose();
}
window.blocklyLoops['loop_main_drum_loop'] = new window.audioEngine.Tone.Loop(async (scheduledTime) => {
    if (!window.audioEngine.isExecutionActive) return;
      
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('C1', Number(1), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:1')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('D1', Number(1), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:2')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('C1', Number(1), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:3')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('D1', Number(1), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:0:0')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('F1', Number(0.2), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:0:2')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('F1', Number(0.2), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:1:0')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('F1', Number(0.2), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:1:2')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('F1', Number(0.2), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:2:0')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('F1', Number(0.2), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:2:2')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('F1', Number(0.2), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:3:0')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('F1', Number(0.2), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }
  
  {
      const _calcOffset = (new window.audioEngine.Tone.Time('0:3:2')).toSeconds();
      const _baseTime = (typeof scheduledTime !== 'undefined') ? scheduledTime : window.audioEngine.Tone.now();
      const _newTime = _baseTime + _calcOffset;
      {
          const scheduledTime = _newTime; // Shadow 'scheduledTime' for nested blocks
            window.audioEngine.playJazzKitNote('F1', Number(0.2), (typeof scheduledTime !== 'undefined' ? scheduledTime : undefined));
  
      }
  }

}, '1m');
window.blocklyLoops['loop_main_drum_loop'].start(0);
window.audioEngine.Tone.Transport.start();


=== SNAPSHOT: 03_Chord.xml ===
// Variable Declarations

var note, velocity, channel;

// Other Definitions



// Function Definitions



// Instrument Creation

/* INSTRUMENT_DEFINITION:DefaultSynth */
  window.audioEngine.createInstrument('DefaultSynth', 'PolySynth');
  (function(){ const t='DefaultSynth'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.1,sustain:0.8,release:0.1,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();
  /* EFFECT_CONFIG:{"type":"compressor","params":{"threshold":-24,"ratio":12,"attack":0.003,"release":0.25},"target":"DefaultSynth"} */window.audioEngine.addEffectToChain(Object.assign({"type":"compressor","params":{"threshold":-24,"ratio":12,"attack":0.003,"release":0.25},"target":"DefaultSynth"}, { target: 'DefaultSynth' }));



// Setup & Configuration

/* MASTER_DEFINITION */
  /* EFFECT_CONFIG:{"type":"limiter","params":{"threshold":-1},"target":"Master"} */window.audioEngine.addEffectToChain(Object.assign({"type":"limiter","params":{"threshold":-1},"target":"Master"}, { target: 'Master' }));



// Main Execution


        {
            var chordNotesArray = 'C4,E4,G4,B4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['CM7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'CM7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'CM7');
            }
        }
        
        {
            let nameToMap = 'CM7';
            if (window.audioEngine.chords[nameToMap]) {
                window.audioEngine.keyboardChordMap['KeyA'] = nameToMap;
                window.audioEngine.logKey('LOG_KEY_MAPPED', 'info', 'KeyA', nameToMap);
            } else {
                window.audioEngine.logKey('LOG_KEY_MAP_ERR', 'error', nameToMap, 'KeyA');
            }
        }
        
        {
            let nameToMap = 'CM7';
            if (window.audioEngine.chords[nameToMap]) {
                window.audioEngine.midiChordMap[59] = nameToMap;
                window.audioEngine.logKey('LOG_MIDI_MAPPED', 'info', 59, nameToMap);
            } else {
                window.audioEngine.logKey('LOG_MIDI_MAP_ERR', 'error', nameToMap, 59);
            }
        }
        window.audioEngine.enablePcKeyboardMidi();


=== SNAPSHOT: 04_Switch_instrument.xml ===
// Variable Declarations

var note, velocity, channel;

// Other Definitions



// Function Definitions



// Instrument Creation

/* INSTRUMENT_DEFINITION:Piano */
  window.audioEngine.createInstrument('Piano', 'PolySynth');
  (function(){ const t='Piano'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.4,sustain:0.2,release:0.5,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();

/* INSTRUMENT_DEFINITION:Strings */
  window.audioEngine.createInstrument('Strings', 'FMSynth');
  (function(){ const t='Strings'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.5,decay:1,sustain:1,release:0.2,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();



// Setup & Configuration

/* MASTER_DEFINITION */
  /* EFFECT_CONFIG:{"type":"limiter","params":{"threshold":-1},"target":"Master"} */window.audioEngine.addEffectToChain(Object.assign({"type":"limiter","params":{"threshold":-1},"target":"Master"}, { target: 'Master' }));



// Main Execution


        {
            var chordNotesArray = 'C4,E4,G4,B4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['CM7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'CM7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'CM7');
            }
        }
        window.audioEngine.enablePcKeyboardMidi();

        {
            let nameToMap = 'CM7';
            if (window.audioEngine.chords[nameToMap]) {
                window.audioEngine.keyboardChordMap['KeyA'] = nameToMap;
                window.audioEngine.logKey('LOG_KEY_MAPPED', 'info', 'KeyA', nameToMap);
            } else {
                window.audioEngine.logKey('LOG_KEY_MAP_ERR', 'error', nameToMap, 'KeyA');
            }
        }
        
        {
            let nameToMap = 'CM7';
            if (window.audioEngine.chords[nameToMap]) {
                window.audioEngine.midiChordMap[54] = nameToMap;
                window.audioEngine.logKey('LOG_MIDI_MAPPED', 'info', 54, nameToMap);
            } else {
                window.audioEngine.logKey('LOG_MIDI_MAP_ERR', 'error', nameToMap, 54);
            }
        }
        

=== SNAPSHOT: 05_Custom sounds.xml ===
// Variable Declarations



// Other Definitions



// Function Definitions



// Instrument Creation

/* INSTRUMENT_DEFINITION:Mellow */
  
          window.audioEngine.createCustomWaveInstrument('Mellow', [1, 0.8, 0]);
      (function(){ const t='Mellow'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.1,sustain:0.5,release:0.2,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();

/* INSTRUMENT_DEFINITION:Scary */
  
          window.audioEngine.createAdditiveInstrument('Scary', [{amp: 1, freqRatio: 1, waveform: 'sine'}, {amp: 0.8, freqRatio: 1.3, waveform: 'sine'}, {amp: 0.2, freqRatio: 0.7, waveform: 'sine'}]);
      (function(){ const t='Scary'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.1,sustain:0.5,release:1,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();



// Setup & Configuration

/* MASTER_DEFINITION */
  /* EFFECT_CONFIG:{"type":"limiter","params":{"threshold":-1},"target":"Master"} */window.audioEngine.addEffectToChain(Object.assign({"type":"limiter","params":{"threshold":-1},"target":"Master"}, { target: 'Master' }));



// Main Execution


            (function() {
                const targetName = 'Scary';
                window.audioEngine.transitionToInstrument(targetName);
                window.audioEngine.logKey('LOG_SWITCH_INSTR_SUCCESS', 'important', targetName);
            })();
        window.audioEngine.enablePcKeyboardMidi();


=== SNAPSHOT: 06_Electric guitar.xml ===
// Variable Declarations



// Other Definitions



// Function Definitions



// Instrument Creation

/* INSTRUMENT_DEFINITION:electric_guitar */
  window.audioEngine.createInstrument('electric_guitar', 'FMSynth');
  (function(){ const t='electric_guitar'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.2,sustain:0.5,release:0.5,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();
  /* EFFECT_CONFIG:{"type":"distortion","params":{"wet":0.6,"distortion":0.4,"oversample":"none"},"target":"electric_guitar"} */window.audioEngine.addEffectToChain(Object.assign({"type":"distortion","params":{"wet":0.6,"distortion":0.4,"oversample":"none"},"target":"electric_guitar"}, { target: 'electric_guitar' }));
  /* EFFECT_CONFIG:{"type":"reverb","params":{"wet":0.5,"decay":1.5,"preDelay":0.01},"target":"electric_guitar"} */window.audioEngine.addEffectToChain(Object.assign({"type":"reverb","params":{"wet":0.5,"decay":1.5,"preDelay":0.01},"target":"electric_guitar"}, { target: 'electric_guitar' }));



// Setup & Configuration

/* MASTER_DEFINITION */
  /* EFFECT_CONFIG:{"type":"limiter","params":{"threshold":-1},"target":"Master"} */window.audioEngine.addEffectToChain(Object.assign({"type":"limiter","params":{"threshold":-1},"target":"Master"}, { target: 'Master' }));



// Main Execution


            (function() {
                const targetName = 'electric_guitar';
                window.audioEngine.transitionToInstrument(targetName);
                window.audioEngine.logKey('LOG_SWITCH_INSTR_SUCCESS', 'important', targetName);
            })();
        window.audioEngine.enablePcKeyboardMidi();


=== SNAPSHOT: 07_sampler.xml ===
// Variable Declarations



// Other Definitions



// Function Definitions



// Instrument Creation

/* INSTRUMENT_DEFINITION:Piano */
  window.audioEngine.createCustomSampler('Piano', { "C4": "C4.mp3" }, "https://tonejs.github.io/audio/salamander/", { attack: 0.02, decay: 0.5, sustain: 0.5, release: 1.0 });
  (function(){ const t='Piano'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.1,sustain:0.5,release:0.5,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();

/* INSTRUMENT_DEFINITION:Violin_arco */
  window.audioEngine.createCustomSampler('Violin_arco', JSON.parse('{"G3":"G3.wav","A3":"A3.wav","B3":"B3.wav","D4":"D4.wav","Gb4":"Gb4.wav","A4":"A4.wav","C5":"C5.wav","E5":"E5.wav","G5":"G5.wav","B5":"B5.wav","D6":"D6.wav"}'), '/SynthBlockly/samples/violin/violin-section-vibrato-sustain/', { attack: 0.1, decay: 0.5, sustain: 1.0, release: 3.0 });
  (function(){ const t='Violin_arco'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.5,decay:0,sustain:1,release:0.8,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();

/* INSTRUMENT_DEFINITION:Violin_pizz */
  window.audioEngine.createCustomSampler('Violin_pizz', JSON.parse('{"G3":"G3.wav","A3":"A3.wav","B3":"B3.wav","D4":"D4.wav","Gb4":"Gb4.wav","A4":"A4.wav","C5":"C5.wav","E5":"E5.wav","G5":"G5.wav","B5":"B5.wav","D6":"D6.wav"}'), '/SynthBlockly/samples/violin/violin-section-pizzicato/', { attack: 0.01, decay: 0.1, sustain: 0.1, release: 0.5 });
  (function(){ const t='Violin_pizz'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.1,sustain:0.2,release:0.2,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();



// Setup & Configuration

/* MASTER_DEFINITION */
  /* EFFECT_CONFIG:{"type":"limiter","params":{"threshold":-1},"target":"Master"} */window.audioEngine.addEffectToChain(Object.assign({"type":"limiter","params":{"threshold":-1},"target":"Master"}, { target: 'Master' }));



// Main Execution


            (function() {
                const targetName = 'Piano';
                window.audioEngine.transitionToInstrument(targetName);
                window.audioEngine.logKey('LOG_SWITCH_INSTR_SUCCESS', 'important', targetName);
            })();
        window.audioEngine.enablePcKeyboardMidi();


=== SNAPSHOT: 08_Step Sequencer.xml ===
// Variable Declarations



// Other Definitions

window.blocklyLoops = window.blocklyLoops || {};

// Function Definitions



// Instrument Creation

/* INSTRUMENT_DEFINITION:Sax */
  window.audioEngine.createInstrument('Sax', 'SawtoothWave');
  (function(){ const t='Sax'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.2,decay:0.1,sustain:1,release:0.1,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();
  (function(){ const t='Sax'; const v=Number(0.3); const db=window.audioEngine.Tone.gainToDb(v); const chan=window.audioEngine._getOrCreateChannel(t); if(chan&&chan.volume) chan.volume.value=db; })();

/* INSTRUMENT_DEFINITION:Piano */
  window.audioEngine.createCustomSampler('Piano', { "C4": "C4.mp3" }, "https://tonejs.github.io/audio/salamander/", { attack: 0.02, decay: 0.5, sustain: 0.5, release: 1.0 });

/* INSTRUMENT_DEFINITION:JazzClap */
  window.audioEngine.createCustomSampler('JazzClap', { "C4": "HANDCLP2.WAV" }, "/SynthBlockly/samples/jazzkit/Roland_TR-909/");

/* INSTRUMENT_DEFINITION:JazzKick */
  window.audioEngine.createCustomSampler('JazzKick', { "C4": "BT0A0D0.WAV" }, "/SynthBlockly/samples/jazzkit/Roland_TR-909/");

/* INSTRUMENT_DEFINITION:JazzHH */
  window.audioEngine.createCustomSampler('JazzHH', { "C4": "HHCDA.WAV" }, "/SynthBlockly/samples/jazzkit/Roland_TR-909/");

/* INSTRUMENT_DEFINITION:Bass */
  window.audioEngine.createInstrument('Bass', 'PolySynth');
  (function(){ const t='Bass'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.05,decay:0.3,sustain:0.8,release:0.3,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();



// Setup & Configuration

/* MASTER_DEFINITION */
  /* EFFECT_CONFIG:{"type":"limiter","params":{"threshold":-1},"target":"Master"} */window.audioEngine.addEffectToChain(Object.assign({"type":"limiter","params":{"threshold":-1},"target":"Master"}, { target: 'Master' }));



// Main Execution

window.audioEngine.Tone.Transport.bpm.value = 105;

        {
            var chordNotesArray = 'D4,F4,A4,C5'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['Dm7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'Dm7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'Dm7');
            }
        }
        
        {
            var chordNotesArray = 'G3,B3,D4,F4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['G7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'G7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'G7');
            }
        }
        
        {
            var chordNotesArray = 'C4,E4,G4,B4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['CM7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'CM7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'CM7');
            }
        }
        
        {
            var chordNotesArray = 'A3,C#4,E4,G4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['A7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'A7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'A7');
            }
        }
        
            (function() {
                const targetName = 'Sax';
                window.audioEngine.transitionToInstrument(targetName);
                window.audioEngine.logKey('LOG_SWITCH_INSTR_SUCCESS', 'important', targetName);
            })();
        window.audioEngine.enablePcKeyboardMidi();
await window.audioEngine.playCountIn(1, 4, 4, 0.3);
window.audioEngine.Tone.Transport.start();

if (window.blocklyLoops['loop_oX1~e+[S@rWEX9Y4ee|E']) {
    window.blocklyLoops['loop_oX1~e+[S@rWEX9Y4ee|E'].dispose();
}
window.blocklyLoops['loop_oX1~e+[S@rWEX9Y4ee|E'] = new window.audioEngine.Tone.Loop(async (scheduledTime) => {
    if (!window.audioEngine.isExecutionActive) return;
      
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 1 + ': Expected 16 steps, found 16. Current sequence: "' + "x--- --x- --x- x---" + '"');
              }
          window.audioEngine.playRhythmSequence('JazzClap', ["x","-","-","-","-","-","x","-","-","-","x","-","x","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 1, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 1 + ': Expected 16 steps, found 16. Current sequence: "' + "Dm7--- Dm7--- --Dm7- --Dm7-" + '"');
              }
          window.audioEngine.playRhythmSequence('Piano', ["Dm7","-","-","-","Dm7","-","-","-","-","-","Dm7","-","-","-","Dm7","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 1, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 1 + ': Expected 16 steps, found 16. Current sequence: "' + "D2--- ---- A2--- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Bass', ["D2","-","-","-","-","-","-","-","A2","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 1, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 2 + ': Expected 16 steps, found 16. Current sequence: "' + "x--- --x- --x- x---" + '"');
              }
          window.audioEngine.playRhythmSequence('JazzKick', ["x","-","-","-","-","-","x","-","-","-","x","-","x","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 2, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 2 + ': Expected 16 steps, found 16. Current sequence: "' + "--G7- --G7- ---- G7---" + '"');
              }
          window.audioEngine.playRhythmSequence('Piano', ["-","-","G7","-","-","-","G7","-","-","-","-","-","G7","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 2, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 2 + ': Expected 16 steps, found 16. Current sequence: "' + "G1--- ---- D2--- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Bass', ["G1","-","-","-","-","-","-","-","D2","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 2, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 3 + ': Expected 16 steps, found 16. Current sequence: "' + "CM7--- CM7--- --CM7- --CM7-" + '"');
              }
          window.audioEngine.playRhythmSequence('Piano', ["CM7","-","-","-","CM7","-","-","-","-","-","CM7","-","-","-","CM7","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 3, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 3 + ': Expected 16 steps, found 16. Current sequence: "' + "C2--- ---- G2--- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Bass', ["C2","-","-","-","-","-","-","-","G2","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 3, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 4 + ': Expected 16 steps, found 16. Current sequence: "' + "--A7- --A7- ---- A7---" + '"');
              }
          window.audioEngine.playRhythmSequence('Piano', ["-","-","A7","-","-","-","A7","-","-","-","-","-","A7","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 4, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 4 + ': Expected 16 steps, found 16. Current sequence: "' + "A1--- ---- E2--- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Bass', ["A1","-","-","-","-","-","-","-","E2","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 4, false);

}, '4m');
window.blocklyLoops['loop_oX1~e+[S@rWEX9Y4ee|E'].start(0);


=== SNAPSHOT: 09_12-bar blues.xml ===
// Variable Declarations

var i;

// Other Definitions

window.blocklyLoops = window.blocklyLoops || {};

// Function Definitions



// Instrument Creation

/* INSTRUMENT_DEFINITION:DefaultSynth */
  window.audioEngine.createInstrument('DefaultSynth', 'DuoSynth');
  (function(){ const t='DefaultSynth'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.1,sustain:0.5,release:0.1,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();

/* INSTRUMENT_DEFINITION:Sax */
  window.audioEngine.createInstrument('Sax', 'SawtoothWave');
  (function(){ const t='Sax'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.2,decay:0.1,sustain:1,release:0.2,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();
  (function(){ const t='Sax'; const v=Number(0.3); const db=window.audioEngine.Tone.gainToDb(v); const chan=window.audioEngine._getOrCreateChannel(t); if(chan&&chan.volume) chan.volume.value=db; })();

/* INSTRUMENT_DEFINITION:ChordSynth */
  
          window.audioEngine.createAdditiveInstrument('ChordSynth', [{amp: 0.3, freqRatio: 1, waveform: 'sine'}, {amp: 0.1, freqRatio: 2, waveform: 'sine'}]);
      
/* INSTRUMENT_DEFINITION:BassSynth */
  window.audioEngine.createInstrument('BassSynth', 'TriangleWave');



// Setup & Configuration

/* MASTER_DEFINITION */
  /* EFFECT_CONFIG:{"type":"limiter","params":{"threshold":-1},"target":"Master"} */window.audioEngine.addEffectToChain(Object.assign({"type":"limiter","params":{"threshold":-1},"target":"Master"}, { target: 'Master' }));



// Main Execution

window.audioEngine.Tone.Transport.bpm.value = 110;

        {
            var chordNotesArray = 'C4,E4,G4,Bb4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['C7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'C7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'C7');
            }
        }
        
        {
            var chordNotesArray = 'F4,A4,C4,Eb4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['F7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'F7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'F7');
            }
        }
        
        {
            var chordNotesArray = 'G4,B4,D4,F4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['G7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'G7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'G7');
            }
        }
        
            (function() {
                const targetName = 'Sax';
                window.audioEngine.transitionToInstrument(targetName);
                window.audioEngine.logKey('LOG_SWITCH_INSTR_SUCCESS', 'important', targetName);
            })();
        window.audioEngine.enablePcKeyboardMidi();
window.audioEngine.Tone.Transport.start();

if (window.blocklyLoops['loop_!,jVa`lurGYdS(LUC#x3']) {
    window.blocklyLoops['loop_!,jVa`lurGYdS(LUC#x3'].dispose();
}
window.blocklyLoops['loop_!,jVa`lurGYdS(LUC#x3'] = new window.audioEngine.Tone.Loop(async (scheduledTime) => {
    if (!window.audioEngine.isExecutionActive) return;
      for (i = 1; i <= 4; i++) {
    
                if (16 !== 16) {
                    window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + i + ': Expected 16 steps, found 16. Current sequence: "' + "C7 . . . | . . C7 . | . . . . | . . C7 ." + '"');
                }
            window.audioEngine.playRhythmSequence('ChordSynth', ["C7",".",".",".",".",".","C7",".",".",".",".",".",".",".","C7","."], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), i, true);
    
                if (16 !== 16) {
                    window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + i + ': Expected 16 steps, found 16. Current sequence: "' + "C2 . . . | G2 . . . | Bb2 . . . | G2 . . ." + '"');
                }
            window.audioEngine.playRhythmSequence('BassSynth', ["C2",".",".",".","G2",".",".",".","Bb2",".",".",".","G2",".",".","."], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), i, false);
  }
  for (i = 5; i <= 6; i++) {
    
                if (16 !== 16) {
                    window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + i + ': Expected 16 steps, found 16. Current sequence: "' + "F7 . . . | . . F7 . | . . . . | . . F7 ." + '"');
                }
            window.audioEngine.playRhythmSequence('ChordSynth', ["F7",".",".",".",".",".","F7",".",".",".",".",".",".",".","F7","."], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), i, true);
    
                if (16 !== 16) {
                    window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + i + ': Expected 16 steps, found 16. Current sequence: "' + "F2 . . . | C3 . . . | Eb3 . . . | C3 . . ." + '"');
                }
            window.audioEngine.playRhythmSequence('BassSynth', ["F2",".",".",".","C3",".",".",".","Eb3",".",".",".","C3",".",".","."], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), i, false);
  }
  for (i = 7; i <= 8; i++) {
    
                if (16 !== 16) {
                    window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + i + ': Expected 16 steps, found 16. Current sequence: "' + "C7 . . . | . . C7 . | . . . . | . . C7 ." + '"');
                }
            window.audioEngine.playRhythmSequence('ChordSynth', ["C7",".",".",".",".",".","C7",".",".",".",".",".",".",".","C7","."], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), i, true);
    
                if (16 !== 16) {
                    window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + i + ': Expected 16 steps, found 16. Current sequence: "' + "C2 . . . | G2 . . . | Bb2 . . . | G2 . . ." + '"');
                }
            window.audioEngine.playRhythmSequence('BassSynth', ["C2",".",".",".","G2",".",".",".","Bb2",".",".",".","G2",".",".","."], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), i, false);
  }
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 9 + ': Expected 16 steps, found 16. Current sequence: "' + "G7 . . . | . . G7 . | . . . . | . . G7 ." + '"');
              }
          window.audioEngine.playRhythmSequence('ChordSynth', ["G7",".",".",".",".",".","G7",".",".",".",".",".",".",".","G7","."], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 9, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 10 + ': Expected 16 steps, found 16. Current sequence: "' + "F7 . . . | . . F7 . | . . . . | . . F7 ." + '"');
              }
          window.audioEngine.playRhythmSequence('ChordSynth', ["F7",".",".",".",".",".","F7",".",".",".",".",".",".",".","F7","."], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 10, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 11 + ': Expected 16 steps, found 16. Current sequence: "' + "C7 . . . | . . C7 . | . . . . | . . C7 ." + '"');
              }
          window.audioEngine.playRhythmSequence('ChordSynth', ["C7",".",".",".",".",".","C7",".",".",".",".",".",".",".","C7","."], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 11, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 12 + ': Expected 16 steps, found 16. Current sequence: "' + "G7 . . . | . . G7 . | . . . . | . . G7 ." + '"');
              }
          window.audioEngine.playRhythmSequence('ChordSynth', ["G7",".",".",".",".",".","G7",".",".",".",".",".",".",".","G7","."], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 12, true);

}, '12m');
window.blocklyLoops['loop_!,jVa`lurGYdS(LUC#x3'].start(0);


=== SNAPSHOT: 10-1_Functions and Long Compositions.xml ===
// Variable Declarations



// Other Definitions



// Function Definitions

// 描述此函式...
async function verse() {
  await window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('C4').toNote(), '4n', (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), Number(1));
  await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4n').toMilliseconds()));
  if (!window.audioEngine.isExecutionActive) return;
  await window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('E4').toNote(), '4n', (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), Number(1));
  await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4n').toMilliseconds()));
  if (!window.audioEngine.isExecutionActive) return;
  await window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('G4').toNote(), '4n', (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), Number(1));
  await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4n').toMilliseconds()));
  if (!window.audioEngine.isExecutionActive) return;
  await window.audioEngine.playCurrentInstrumentNote(window.audioEngine.Tone.Midi('C5').toNote(), '4n', (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), Number(1));
  await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4n').toMilliseconds()));
  if (!window.audioEngine.isExecutionActive) return;
}

// 描述此函式...
async function chorus() {
  window.audioEngine.playChordByName('F', '2n', Number(1));
  
  await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('2n').toMilliseconds()));
  if (!window.audioEngine.isExecutionActive) return;
  window.audioEngine.playChordByName('G', '2n', Number(1));
  
  await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('2n').toMilliseconds()));
  if (!window.audioEngine.isExecutionActive) return;
}

// Instrument Creation

/* INSTRUMENT_DEFINITION:DefaultSynth */
  window.audioEngine.createInstrument('DefaultSynth', 'PolySynth');
  (function(){ const t='DefaultSynth'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.01,decay:0.1,sustain:0.5,release:0.5,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();


        {
            var chordNotesArray = 'F4,A4,C5'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['F'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'F', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'F');
            }
        }
        
        {
            var chordNotesArray = 'G4,B4,D5'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['G'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'G', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'G');
            }
        }
        

// Setup & Configuration

/* MASTER_DEFINITION */
  /* EFFECT_CONFIG:{"type":"limiter","params":{"threshold":-1},"target":"Master"} */window.audioEngine.addEffectToChain(Object.assign({"type":"limiter","params":{"threshold":-1},"target":"Master"}, { target: 'Master' }));



// Main Execution

window.audioEngine.Tone.Transport.bpm.value = 120;
await verse();
await chorus();
await verse();
await chorus();


=== SNAPSHOT: 10-2_Functions and Sequencer Arranger.xml ===
// Variable Declarations



// Other Definitions



// Function Definitions

// 描述此函式...
async function _E6_BC_94_E5_A5_8F_A__E6_AE_B5() {
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 1 + ': Expected 16 steps, found 16. Current sequence: "' + "x--- --x- --x- x---" + '"');
              }
          window.audioEngine.playRhythmSequence('JazzClap', ["x","-","-","-","-","-","x","-","-","-","x","-","x","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 1, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 1 + ': Expected 16 steps, found 16. Current sequence: "' + "Dm7--- Dm7--- --Dm7- --Dm7-" + '"');
              }
          window.audioEngine.playRhythmSequence('Piano', ["Dm7","-","-","-","Dm7","-","-","-","-","-","Dm7","-","-","-","Dm7","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 1, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 1 + ': Expected 16 steps, found 16. Current sequence: "' + "D2--- ---- A2--- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Bass', ["D2","-","-","-","-","-","-","-","A2","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 1, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 2 + ': Expected 16 steps, found 16. Current sequence: "' + "x--- --x- --x- x---" + '"');
              }
          window.audioEngine.playRhythmSequence('JazzKick', ["x","-","-","-","-","-","x","-","-","-","x","-","x","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 2, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 2 + ': Expected 16 steps, found 16. Current sequence: "' + "--G7- --G7- ---- G7---" + '"');
              }
          window.audioEngine.playRhythmSequence('Piano', ["-","-","G7","-","-","-","G7","-","-","-","-","-","G7","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 2, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 2 + ': Expected 16 steps, found 16. Current sequence: "' + "G1--- ---- D2--- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Bass', ["G1","-","-","-","-","-","-","-","D2","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 2, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 3 + ': Expected 16 steps, found 16. Current sequence: "' + "x--- --x- --x- x---" + '"');
              }
          window.audioEngine.playRhythmSequence('JazzClap', ["x","-","-","-","-","-","x","-","-","-","x","-","x","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 3, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 3 + ': Expected 16 steps, found 16. Current sequence: "' + "CM7--- CM7--- --CM7- --CM7-" + '"');
              }
          window.audioEngine.playRhythmSequence('Piano', ["CM7","-","-","-","CM7","-","-","-","-","-","CM7","-","-","-","CM7","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 3, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 3 + ': Expected 16 steps, found 16. Current sequence: "' + "C2--- ---- G2--- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Bass', ["C2","-","-","-","-","-","-","-","G2","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 3, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 4 + ': Expected 16 steps, found 16. Current sequence: "' + "x--- --x- --x- x---" + '"');
              }
          window.audioEngine.playRhythmSequence('JazzKick', ["x","-","-","-","-","-","x","-","-","-","x","-","x","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 4, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 4 + ': Expected 16 steps, found 16. Current sequence: "' + "--A7- --A7- ---- A7---" + '"');
              }
          window.audioEngine.playRhythmSequence('Piano', ["-","-","A7","-","-","-","A7","-","-","-","-","-","A7","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 4, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 4 + ': Expected 16 steps, found 16. Current sequence: "' + "A1--- ---- E2--- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Bass', ["A1","-","-","-","-","-","-","-","E2","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 4, false);
}

// 描述此函式...
async function _E6_BC_94_E5_A5_8F_B__E6_AE_B5() {
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 1 + ': Expected 16 steps, found 16. Current sequence: "' + "Dm7--- ---- G7--- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Piano', ["Dm7","-","-","-","-","-","-","-","G7","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 1, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 1 + ': Expected 16 steps, found 16. Current sequence: "' + "D2--- ---- G1--- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Bass', ["D2","-","-","-","-","-","-","-","G1","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 1, false);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 2 + ': Expected 16 steps, found 16. Current sequence: "' + "C_End--- ---- ---- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Piano', ["C_End","-","-","-","-","-","-","-","-","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 2, true);
  
              if (16 !== 16) {
                  window.audioEngine.logKey('LOG_MELODY_PARSE_ERR', 'warning', 'Measure ' + 2 + ': Expected 16 steps, found 16. Current sequence: "' + "C2--- ---- ---- ----" + '"');
              }
          window.audioEngine.playRhythmSequence('Bass', ["C2","-","-","-","-","-","-","-","-","-","-","-","-","-","-","-"], (typeof scheduledTime !== 'undefined' ? scheduledTime : window.audioEngine.Tone.now()), 2, false);
}

// Instrument Creation

/* INSTRUMENT_DEFINITION:Piano */
  window.audioEngine.createCustomSampler('Piano', { "C4": "C4.mp3" }, "https://tonejs.github.io/audio/salamander/", { attack: 0.02, decay: 0.5, sustain: 0.5, release: 1.0 });
  (function(){ const t='Piano'; const v=Number(0.5); const db=window.audioEngine.Tone.gainToDb(v); const chan=window.audioEngine._getOrCreateChannel(t); if(chan&&chan.volume) chan.volume.value=db; })();

/* INSTRUMENT_DEFINITION:JazzClap */
  window.audioEngine.createCustomSampler('JazzClap', { "C4": "HANDCLP2.WAV" }, "/SynthBlockly/samples/jazzkit/Roland_TR-909/");
  (function(){ const t='JazzClap'; const v=Number(0.5); const db=window.audioEngine.Tone.gainToDb(v); const chan=window.audioEngine._getOrCreateChannel(t); if(chan&&chan.volume) chan.volume.value=db; })();

/* INSTRUMENT_DEFINITION:JazzKick */
  window.audioEngine.createCustomSampler('JazzKick', { "C4": "BT0A0D0.WAV" }, "/SynthBlockly/samples/jazzkit/Roland_TR-909/");
  (function(){ const t='JazzKick'; const v=Number(0.8); const db=window.audioEngine.Tone.gainToDb(v); const chan=window.audioEngine._getOrCreateChannel(t); if(chan&&chan.volume) chan.volume.value=db; })();

/* INSTRUMENT_DEFINITION:JazzHH */
  window.audioEngine.createCustomSampler('JazzHH', { "C4": "HHCDA.WAV" }, "/SynthBlockly/samples/jazzkit/Roland_TR-909/");
  (function(){ const t='JazzHH'; const v=Number(0.1); const db=window.audioEngine.Tone.gainToDb(v); const chan=window.audioEngine._getOrCreateChannel(t); if(chan&&chan.volume) chan.volume.value=db; })();

/* INSTRUMENT_DEFINITION:Bass */
  window.audioEngine.createInstrument('Bass', 'PolySynth');
  (function(){ const t='Bass'; const engine=window.audioEngine; const instr=engine.instruments[t]; if(instr){ const settings={attack:0.05,decay:0.3,sustain:0.8,release:0.3,decayCurve:'linear',releaseCurve:'linear'}; engine.instrumentSettings[t]={...settings}; if(instr.set) instr.set({envelope:settings}); if(instr.get&&instr.get().voice0) instr.set({voice0:{envelope:settings},voice1:{envelope:settings}}); if(engine.currentInstrumentName===t) engine.syncAdsrToUI(); engine.logKey('LOG_ADSR_SET_INSTR','info',t); } })();
  (function(){ const t='Bass'; const v=Number(1); const db=window.audioEngine.Tone.gainToDb(v); const chan=window.audioEngine._getOrCreateChannel(t); if(chan&&chan.volume) chan.volume.value=db; })();


        {
            var chordNotesArray = 'D4,F4,A4,C5'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['Dm7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'Dm7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'Dm7');
            }
        }
        
        {
            var chordNotesArray = 'G3,B3,D4,F4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['G7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'G7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'G7');
            }
        }
        
        {
            var chordNotesArray = 'C4,E4,G4,B4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['CM7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'CM7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'CM7');
            }
        }
        
        {
            var chordNotesArray = 'A3,C#4,E4,G4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['A7'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'A7', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'A7');
            }
        }
        
        {
            var chordNotesArray = 'C3,G3,C4,E4,G4,B4'.split(',').map(note => note.trim());
            if (chordNotesArray.length > 0 && chordNotesArray[0] !== '') {
                window.audioEngine.chords['C_End'] = chordNotesArray;
                window.audioEngine.logKey('LOG_CHORD_DEFINED', 'info', 'C_End', chordNotesArray.join(', '));
            } else {
                window.audioEngine.logKey('LOG_CHORD_ERR', 'error', 'C_End');
            }
        }
        

// Setup & Configuration



// Main Execution

window.audioEngine.enablePcKeyboardMidi();
window.audioEngine.Tone.Transport.bpm.value = 105;
window.audioEngine.Tone.Transport.start();
await window.audioEngine.playCountIn(1, 4, 4, 0.3);
await _E6_BC_94_E5_A5_8F_A__E6_AE_B5();

await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4m').toMilliseconds()));
if (!window.audioEngine.isExecutionActive) return;
await _E6_BC_94_E5_A5_8F_A__E6_AE_B5();

await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4m').toMilliseconds()));
if (!window.audioEngine.isExecutionActive) return;
await _E6_BC_94_E5_A5_8F_B__E6_AE_B5();

await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('2m').toMilliseconds()));
if (!window.audioEngine.isExecutionActive) return;
await _E6_BC_94_E5_A5_8F_A__E6_AE_B5();

await new Promise(resolve => setTimeout(resolve, window.audioEngine.Tone.Time('4m').toMilliseconds()));
if (!window.audioEngine.isExecutionActive) return;
await _E6_BC_94_E5_A5_8F_B__E6_AE_B5();


