<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>如何使用「建立取樣音源」積木</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; padding: 20px; color: #333; }
        h1 { color: #5CB85C; }
        h2 { color: #444; border-bottom: 2px solid #eee; padding-bottom: 5px; }
        .type-box { margin-bottom: 20px; padding: 15px; background: #f9f9f9; border-radius: 8px; }
        code { background: #eee; padding: 2px 4px; border-radius: 4px; }
        .important { background-color: #fffbe6; border-left: 4px solid #ffc107; padding: 15px; margin: 15px 0; border-radius: 0 8px 8px 0; }
    </style>
</head>
<body>
    <h1>如何使用「建立取樣音源」積木</h1>
    <p>這個積木讓你從自己的音訊樣本中，打造一個獨一無二的全新樂器。</p>

    <div class="type-box">
        <h2>運作原理：重新採樣 (Resampling)</h2>
        <p>這個積木的核心是基於 Tone.js 強大的 <code>Sampler</code> 功能，其運作依賴「數位音訊重新採樣」技術：</p>
        <ul>
            <li><strong>單一樣本</strong>：如果你只提供一個音訊樣本（例如 C4 錄音），取樣器就能產生完整的音高範圍。播高音時會加速，播低音時則會放慢。</li>
            <li><strong>多重樣本 (Multisampling)</strong>：為了獲得更真實、高品質的聲音，你可以提供多個不同音高的樣本。取樣器會聰明地選取最接近的原始樣本進行微調，減少音質劣化。</li>
        </ul>
    </div>

    <h2>步驟一：準備音訊樣本</h2>
    <ol>
        <li><strong>尋找樣本</strong>：在網路上尋找單音符檔案 (<code>.wav</code>, <code>.mp3</code>)。例如 <code>Freesound.org</code>。</li>
        <li><strong>推薦資源</strong>：您可以參考這個 GitHub 儲存庫獲取多種樂器的完整取樣點：<br>
            <a href="https://github.com/nbrosowsky/tonejs-instruments/tree/master/samples" target="_blank">nbrosowsky/tonejs-instruments Samples</a></li>
        <li><strong>檢查授權</strong>：確保檔案允許自由使用 (如 CC0 授權)。</li>
    </ol>

    <h2>步驟二：託管音訊檔案</h2>
    <p>為了讓積木能夠讀取樣本，檔案必須存放在公開網址上。<strong>GitHub Pages</strong> 是最推薦的免費方法：</p>
    <ol>
        <li>建立新的公開 GitHub 儲存庫（如 <code>my-samples</code>）。</li>
        <li>上傳您的檔案並提交。</li>
        <li>在 <code>Settings > Pages</code> 中啟用 GitHub Pages。</li>
        <li>獲取您的基礎網址，例如：<code>https://user.github.io/my-samples/</code></li>
    </ol>

    <h2>步驟三：配置積木</h2>
    <p>從<strong>「創建樂器」</strong>分類中拖出「定義樂器」容器並命名，接著在內部放入「建立取樣音源」積木：</p>
    <ul>
        <li><strong>容器名稱</strong>：為樂器命名 (如 <code>MyViolin</code>)。</li>
        <li><strong>型態</strong>：選擇預設音色或「自訂樣本 URL...」。</li>
        <li><strong>基礎網址</strong>：貼上您的 GitHub Pages 網址（若選自訂）。</li>
        <li><strong>樣本映射</strong>：使用 JSON 格式將音符對應到檔案（若選自訂）。</li>
    </ul>

    <div class="important">
        <p><strong>💡 樣本映射 (Sample Map) 的兩種用法</strong>：</p>
        
        <p><strong>方法 A：直接填寫 JSON 內容 (推薦用於少量樣本)</strong></p>
        <p>手動輸入映射字串，格式如下：</p>
        <code style="display: block; white-space: pre; margin: 10px 0;">{"A1": "A1.mp3", "C2": "C2.mp3", "Ds3": "Ds3.mp3"}</code>
        
        <p><strong>方法 B：提供 JSON 檔案網址 (推薦用於完整樂器)</strong></p>
        <p>您可以將 JSON 檔案放在與取樣檔相同的網路上（例如 GitHub），並直接填入網址：</p>
        <code style="display: block; white-space: pre; margin: 10px 0;">https://user.github.io/my-samples/piano.json</code>
        
        <p><strong>⚠️ 注意事項</strong>：</p>
        <ul>
            <li>如果使用<strong>網址</strong>，請確保該伺服器允許跨網域存取 (CORS)。</li>
            <li>無論哪種方式，Key (音高) 與 Value (檔名) 內部都必須使用<strong>雙引號</strong>。</li>
            <li>若檔名包含 <code>#</code> 字號，建議在 JSON 中將其寫為 <code>s</code> (如 <code>Ds3.mp3</code>) 以確保網址解析正確。</li>
        </ul>
    </div>

    <div class="type-box">
        <h2>支援格式</h2>
        <p>推薦使用 <code>.wav</code>（音質最佳）或 <code>.mp3</code>（相容性最好）。現代瀏覽器也支援 <code>.m4a</code>, <code>.ogg</code>, <code>.flac</code> 等格式。</p>
    </div>

    <div class="type-box">
        <h2>取樣器與 ADSR 包絡線</h2>
        <p>取樣器與合成器不同，它是播放預錄的音檔，因此 ADSR 各參數的影響程度如下：</p>
        <ul>
            <li><strong>Release (釋放時間) - 最重要</strong>：決定放開按鍵後聲音消失的速度。調高可增加餘韻（如大禮堂琴聲），調低則使聲音乾脆切斷。</li>
            <li><strong>Attack (侵入時間)</strong>：決定聲音漸入的速度。調高可將清脆的鋼琴變成柔和的氛圍墊音。</li>
            <li><strong>Decay (衰減) 與 Sustain (維持)</strong>：由於樣本本身已有錄好的音量動態，調整這兩項對真實感的影響較小，通常維持預設即可。</li>
        </ul>
    </div>
</body>
</html>