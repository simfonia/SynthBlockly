<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to Use the Custom Sampler Block</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; padding: 20px; }
        h1, h2 { border-bottom: 1px solid #ccc; padding-bottom: 5px; }
        code { background-color: #f4f4f4; padding: 2px 6px; border-radius: 4px; }
        .container { max-width: 800px; margin: 0 auto; }
        .important { background-color: #fffbe6; border-left: 4px solid #ffc107; padding: 10px; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>How to Use the "Create Custom Sampler" Block</h1>
        <p>This block allows you to create a new musical instrument from your own audio samples.</p>

        <h2>How It Works: The Principle of Resampling</h2>
        <p>
            This block is built on Tone.js's powerful <code>Sampler</code> instrument. Its core functionality relies on a technique called <strong>digital audio resampling</strong>.
        </p>
        <ul>
            <li><strong>Single Sample</strong>: If you provide only one audio sample (e.g., a recording of a C4 violin note), the sampler can generate a full range of pitches. When you ask it to play a higher note (like E4), it speeds up the sample's playback. When you ask for a lower note (like A3), it slows it down. This allows a single sound to cover the entire keyboard.</li>
            <li><strong>Multiple Samples (Multisampling)</strong>: For a more realistic and higher-quality sound, you can provide samples at different pitches (e.g., C4, G4, C5, G5...). This is called "multisampling." When you play a note, the sampler intelligently picks the closest original sample and resamples it just a small amount. This minimizes the audio degradation that can happen when pitching a single sample too far from its original state, resulting in a much more authentic-sounding instrument.</li>
        </ul>
        <hr>

        <h2>Step 1: Find and Prepare Your Audio Samples</h2>
        <ol>
            <li><strong>Find Samples</strong>: Look for single-note audio files (e.g., <code>.wav</code>, <code>.mp3</code>) online. Websites like <code>Freesound.org</code> are a good resource. Search for terms like "violin C4", "piano samples", etc.</li>
            <li><strong>Check Licensing</strong>: Ensure the audio files are licensed for free use (e.g., Public Domain, Creative Commons CC0).</li>
            <li><strong>Organize Files</strong>: Collect the audio files you want to use.</li>
        </ol>

        <h2>Step 2: Host Your Audio Files Online</h2>
        <p>To use the samples, they must be accessible via a public URL. A free and reliable way to do this is by using GitHub Pages.</p>
        <ol>
            <li><strong>Create a New GitHub Repository</strong>: Go to GitHub and create a new <strong>Public</strong> repository (e.g., <code>my-synth-samples</code>). Initialize it with a <code>README.md</code> file.</li>
            <li><strong>Upload Your Files</strong>: In your new repository, click <code>Add file</code> > <code>Upload files</code> and drop your sample files in. Commit the changes.</li>
            <li><strong>Enable GitHub Pages to Get the Base URL</strong>:
                <ul>
                    <li>In the repository settings, go to the <code>Pages</code> tab.</li>
                    <li>Under <code>Branch</code>, select <code>main</code> (or <code>master`) and click <code>Save</code>.</li>
                    <li>After the page refreshes, a green box will appear with your site's URL. It will look like this: <br><code>https://&lt;YOUR_USERNAME&gt;.github.io/&lt;YOUR_REPO_NAME&gt;/</code></li>
                    <li><strong>This is the Base URL for your sampler.</strong></li>
                </ul>
            </li>
        </ol>

        <h2>Step 3: Use the Block in SynthBlockly</h2>
        <p>Drag the "Create Custom Sampler" block from the <code>Samplers</code> category and fill in the fields:</p>
        <ul>
            <li><strong>Name</strong>: Give your instrument a name (e.g., <code>MyViolin</code>).</li>
            <li><strong>Base URL</strong>: Use a Text block to input the URL you got from GitHub Pages.</li>
            <li><strong>Sample Map</strong>: This is a JSON string that maps a musical note to its corresponding audio file.</li>
        </ul>
        <div class="important">
            <p><strong>Format</strong>: <code>'{"NOTE_1": "file1.wav", "NOTE_2": "file2.mp3"}'</code></p>
            <p><strong>Important</strong>: The entire string must be wrapped in <strong>single quotes</strong> (<code>'</code>), while the keys (notes) and values (filenames) inside must use <strong>double quotes</strong> (<code>"</code>).</p>
        </div>
        <p><strong>Example</strong>: If your Base URL is <code>https://my-username.github.io/my-samples/</code> and you uploaded <code>violin-a4.wav</code> and <code>violin-c5.wav</code>, your Sample Map would be:</p>
        <p><code>'{"A4": "violin-a4.wav", "C5": "violin-c5.wav"}'</code></p>

        <p>After running this block, you can use the <code>Select Current Instrument</code> block to switch to your newly created instrument and play it!</p>

        <h2>Supported Audio Formats</h2>
        <p>The audio formats supported by the sampler primarily depend on your web browser's capabilities. Most modern browsers (Chrome, Firefox, Safari, Edge) offer excellent support for common audio formats, including:</p>
        <ul>
            <li><code>.wav</code>: Uncompressed format, generally highest quality but larger file size.</li>
            <li><code>.mp3</code>: Very common compressed format, excellent compatibility.</li>
            <li><code>.m4a</code> (or <code>.aac</code>): Compressed format widely used, especially in Apple ecosystems.</li>
            <li><code>.ogg</code>: Another common open-source compressed format.</li>
            <li><code>.flac</code>: Lossless compressed format, offering good quality with smaller file sizes than WAV.</li>
        </ul>
        <p><strong>Recommendation:</strong> For best compatibility, <code>.wav</code> and <code>.mp3</code> are generally recommended.</p>
    </div>
</body>
</html>
