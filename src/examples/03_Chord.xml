<xml xmlns="https://developers.google.com/blockly/xml">
  <variables>
    <variable id="943%g@1O`6M-[E3FdF/f">note</variable>
    <variable id="t_58Z%F-bzi=L0]L=~Bm">velocity</variable>
    <variable id="2ZGm|O?HgX9o`vd?7U|`">channel</variable>
  </variables>
  <block type="sb_comment" id="chord_guide" x="10" y="10">
    <field name="COMMENT">1.展示使用MIDI按鍵的「映射 (Mapping)」功能。&amp;#10;它屬於「閘門式 (Gate)」演奏：&amp;#10;按住琴鍵時發聲 (Attack)，放開琴鍵時停止 (Release)。&amp;#10;聲音的長度完全由您的手指按壓時間控制。&amp;#10;&amp;#10;2.示範使用單鍵來觸發和弦&amp;#10;由於多個音的疊加會造成截波而產生破音，&amp;#10;此時使用Compressor可以避免這個狀況發生。</field>
  </block>
  <block type="sb_master_container" id="setup_master" x="10" y="210">
    <statement name="STACK">
      <block type="sb_container_setup_effect" id="m_limiter">
        <mutation effect_type="limiter"></mutation>
        <field name="EFFECT_TYPE">limiter</field>
        <value name="THRESHOLD">
          <shadow type="math_number" id="hj@,Ct*JOUQD?$DvX!/.">
            <field name="NUM">-1</field>
          </shadow>
        </value>
      </block>
    </statement>
  </block>
  <block type="sb_instrument_container" id="setup_chord_synth" x="10" y="330">
    <field name="NAME">DefaultSynth</field>
    <statement name="STACK">
      <block type="sb_create_synth_instrument" id="c1">
        <field name="TYPE">PolySynth</field>
        <next>
          <block type="sb_container_adsr" id="a1">
            <field name="A">0.01</field>
            <field name="D">0.1</field>
            <field name="S">0.8</field>
            <field name="R">0.1</field>
            <next>
              <block type="sb_container_setup_effect" id="comp1" disabled-reasons="MANUALLY_DISABLED">
                <mutation effect_type="compressor"></mutation>
                <field name="EFFECT_TYPE">compressor</field>
                <value name="THRESHOLD">
                  <shadow type="math_number" id="*tET2s%)ZD*`gIh2wSL-">
                    <field name="NUM">-24</field>
                  </shadow>
                </value>
                <value name="RATIO">
                  <shadow type="math_number" id="yxYk[X4c2;Fo)0zo`w*:">
                    <field name="NUM">12</field>
                  </shadow>
                </value>
                <value name="ATTACK">
                  <shadow type="math_number" id="!;m8XsLElJi;a6ZqvA{6">
                    <field name="NUM">0.003</field>
                  </shadow>
                </value>
                <value name="RELEASE">
                  <shadow type="math_number" id="wX|dD@C7j5*}n((!uZkr">
                    <field name="NUM">0.25</field>
                  </shadow>
                </value>
              </block>
            </next>
          </block>
        </next>
      </block>
    </statement>
  </block>
  <block type="sb_define_chord" id="def_cm7" x="10" y="590">
    <field name="NAME">CM7</field>
    <field name="NOTES_STRING">C4,E4,G4,B4</field>
    <next>
      <block type="sb_map_key_to_chord" id="map_key">
        <field name="KEY_CODE">KeyA</field>
        <field name="CHORD_NAME">CM7</field>
        <next>
          <block type="sb_map_midi_to_chord" id="map_midi">
            <field name="MIDI_NOTE">59</field>
            <field name="CHORD_NAME">CM7</field>
            <next>
              <block type="sb_toggle_pc_keyboard_midi" id="enable_pc">
                <field name="ACTION">ON</field>
              </block>
            </next>
          </block>
        </next>
      </block>
    </next>
  </block>
  <block type="sb_midi_note_received" id="midi_gate" x="10" y="730">
    <field name="NOTE" id="943%g@1O`6M-[E3FdF/f">note</field>
    <field name="VELOCITY" id="t_58Z%F-bzi=L0]L=~Bm">velocity</field>
    <field name="CHANNEL" id="2ZGm|O?HgX9o`vd?7U|`">channel</field>
    <statement name="DO">
      <block type="controls_if" id="check_60">
        <value name="IF0">
          <block type="logic_compare" id="h.V9F*LNr=FcPUMyK%6O">
            <field name="OP">GTE</field>
            <value name="A">
              <block type="variables_get" id="17!6L#mAqa0f~}#(bI{T">
                <field name="VAR" id="943%g@1O`6M-[E3FdF/f">note</field>
              </block>
            </value>
            <value name="B">
              <block type="math_number" id="{dicjsB;d+lSJcuTRuB~">
                <field name="NUM">60</field>
              </block>
            </value>
          </block>
        </value>
        <statement name="DO0">
          <block type="sb_midi_play" id="D:a@8Z=z3s!-}9?[5L)b">
            <value name="NOTE">
              <shadow type="variables_get" id="tYme!o4-LvEKuyO_B_14">
                <field name="VAR" id="943%g@1O`6M-[E3FdF/f">note</field>
              </shadow>
            </value>
            <value name="VELOCITY">
              <shadow type="variables_get" id="4zPJb.r.;)D7{#p*q3]P">
                <field name="VAR" id="t_58Z%F-bzi=L0]L=~Bm">velocity</field>
              </shadow>
            </value>
            <value name="CHANNEL">
              <shadow type="variables_get" id="I{SO~R[o34C{6npN+Y^*">
                <field name="VAR" id="2ZGm|O?HgX9o`vd?7U|`">channel</field>
              </shadow>
            </value>
          </block>
        </statement>
        <next>
          <block type="controls_if" id="check_59">
            <value name="IF0">
              <block type="logic_compare" id="kL,ob%v6QK2yYVw}YyBk">
                <field name="OP">EQ</field>
                <value name="A">
                  <block type="variables_get" id="a)2@!WNVyUEzS-NRZ]:G">
                    <field name="VAR" id="943%g@1O`6M-[E3FdF/f">note</field>
                  </block>
                </value>
                <value name="B">
                  <block type="math_number" id="7%^yDB,)kyveNH)I+]qZ">
                    <field name="NUM">59</field>
                  </block>
                </value>
              </block>
            </value>
            <statement name="DO0">
              <block type="sb_comment" id="!wlO0j`HPVw;7Ao1k4o$">
                <field name="COMMENT">底下的觸發會被轉成CM7和弦映射</field>
                <next>
                  <block type="sb_midi_play" id=";qjfqMRnHOfSYxu^]j5i">
                    <value name="NOTE">
                      <shadow type="variables_get" id="-|x/{7h8FDr51yA|t4Nx">
                        <field name="VAR" id="943%g@1O`6M-[E3FdF/f">note</field>
                      </shadow>
                    </value>
                    <value name="VELOCITY">
                      <shadow type="variables_get" id="H(HJ17/(N=z,2+`sp3dH">
                        <field name="VAR" id="t_58Z%F-bzi=L0]L=~Bm">velocity</field>
                      </shadow>
                    </value>
                    <value name="CHANNEL">
                      <shadow type="variables_get" id=".Af}k6{QaI(zg=.42.PN">
                        <field name="VAR" id="2ZGm|O?HgX9o`vd?7U|`">channel</field>
                      </shadow>
                    </value>
                  </block>
                </next>
              </block>
            </statement>
            <next>
              <block type="controls_if" id="check_58">
                <value name="IF0">
                  <block type="logic_compare" id="g=fP9n)Xx$P;;H)E5AH=">
                    <field name="OP">EQ</field>
                    <value name="A">
                      <block type="variables_get" id="Ed4[1Za}-fO1l0~((tH=">
                        <field name="VAR" id="943%g@1O`6M-[E3FdF/f">note</field>
                      </block>
                    </value>
                    <value name="B">
                      <block type="math_number" id="nSEiGUG3=H+R#FiTQg_2">
                        <field name="NUM">58</field>
                      </block>
                    </value>
                  </block>
                </value>
                <statement name="DO0">
                  <block type="jazzkit_play_drum" id="Kf2oGvHd{3@L4yP5x5A1">
                    <field name="DRUM_TYPE">D#1</field>
                    <value name="VELOCITY">
                      <block type="variables_get" id="=f0Xq`,_]5g{o7`E2)8Q">
                        <field name="VAR" id="t_58Z%F-bzi=L0]L=~Bm">velocity</field>
                      </block>
                    </value>
                  </block>
                </statement>
              </block>
            </next>
          </block>
        </next>
      </block>
    </statement>
  </block>
</xml>