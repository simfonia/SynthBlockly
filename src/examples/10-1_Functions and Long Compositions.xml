<xml xmlns="https://developers.google.com/blockly/xml">
  <block type="sb_comment" id="intro_guide" x="10" y="10">
    <field name="COMMENT">【初始化與函式編曲】&amp;#10;這裡展示如何利用函式構建長篇樂曲。&amp;#10;&amp;#10;1. 初始化：定義全曲共用的樂器與和弦。&amp;#10;2. 函式：將段落封裝成「verse」與「chorus」。&amp;#10;3. 主程式：像堆積木一樣按順序呼叫段落。&amp;#10;&amp;#10;注意：&amp;#10;本範例使用「播放並等待」控制時間，段落銜接會有極微小的運算延遲。&amp;#10;若需要絕對精準，請參考範例 10-2。</field>
  </block>
  <block type="sb_instrument_container" id="setup_default" x="10" y="250">
    <field name="NAME">DefaultSynth</field>
    <statement name="STACK">
      <block type="sb_create_synth_instrument" id="BO?)TM8%9FS9;Ji|i2s5">
        <field name="TYPE">PolySynth</field>
        <next>
          <block type="sb_container_adsr" id="*BC(n:f?7GHTE2L}td/z">
            <field name="A">0.01</field>
            <field name="D">0.1</field>
            <field name="S">0.5</field>
            <field name="R">0.5</field>
          </block>
        </next>
      </block>
    </statement>
  </block>
  <block type="sb_master_container" id="setup_master" x="10" y="370">
    <statement name="STACK">
      <block type="sb_container_setup_effect" id="4kzUe7RRQ60l$w;IYs#!">
        <mutation effect_type="limiter"></mutation>
        <field name="EFFECT_TYPE">limiter</field>
        <value name="THRESHOLD">
          <shadow type="math_number" id="iC*ya+8ejTW|S7[.B*s{">
            <field name="NUM">-1</field>
          </shadow>
        </value>
      </block>
    </statement>
  </block>
  <block type="sb_define_chord" id="]NJJSart_Bu2n]}?EJ6W" x="10" y="490">
    <field name="NAME">F</field>
    <field name="NOTES_STRING">F4,A4,C5</field>
    <next>
      <block type="sb_define_chord" id="40Q!Uy(KQvV/ts*Ftx+%">
        <field name="NAME">G</field>
        <field name="NOTES_STRING">G4,B4,D5</field>
      </block>
    </next>
  </block>
  <block type="procedures_defnoreturn" id="def_v" x="10" y="570">
    <field name="NAME">verse</field>
    <comment pinned="false" h="80" w="160">描述此函式...</comment>
    <statement name="STACK">
      <block type="sb_play_note_and_wait" id="Nda(v,?I_pGH/BpE+@}z">
        <field name="DUR">4n</field>
        <value name="NOTE">
          <shadow type="text" id="J6b}j(yI5hiI@Tsx.oF4">
            <field name="TEXT">C4</field>
          </shadow>
        </value>
        <next>
          <block type="sb_play_note_and_wait" id="t#xo+)vR.jnr?sU7/[:v">
            <field name="DUR">4n</field>
            <value name="NOTE">
              <shadow type="text" id=":*j#+.`ym?Bs0aO*_EBH">
                <field name="TEXT">E4</field>
              </shadow>
            </value>
            <next>
              <block type="sb_play_note_and_wait" id="_pkI8h(YljXk`.(BJ==C">
                <field name="DUR">4n</field>
                <value name="NOTE">
                  <shadow type="text" id="2cx@e}I%)|jUp=]m~]W6">
                    <field name="TEXT">G4</field>
                  </shadow>
                </value>
                <next>
                  <block type="sb_play_note_and_wait" id="P1@U!ECQSsKUwaCuYOFM">
                    <field name="DUR">4n</field>
                    <value name="NOTE">
                      <shadow type="text" id=",KM9/+bF!nIrM0lfi0zR">
                        <field name="TEXT">C5</field>
                      </shadow>
                    </value>
                  </block>
                </next>
              </block>
            </next>
          </block>
        </next>
      </block>
    </statement>
  </block>
  <block type="procedures_defnoreturn" id="def_c" x="10" y="790">
    <field name="NAME">chorus</field>
    <comment pinned="false" h="80" w="160">描述此函式...</comment>
    <statement name="STACK">
      <block type="sb_play_chord_by_name" id=".-95z*N#3W~}i-F)QDo,">
        <field name="CHORD_NAME">F</field>
        <field name="DUR">2n</field>
        <value name="VELOCITY">
          <shadow type="math_number" id="@HM~zkr@7IRs+IvugQ6U">
            <field name="NUM">1</field>
          </shadow>
        </value>
        <next>
          <block type="sb_wait_musical" id="4|pCv+W*+_Y[(yfV?/uo">
            <field name="DURATION">2n</field>
            <next>
              <block type="sb_play_chord_by_name" id="!q.k]8a^DaOUvk7i5w4y">
                <field name="CHORD_NAME">G</field>
                <field name="DUR">2n</field>
                <value name="VELOCITY">
                  <shadow type="math_number" id="zxO2s=hy|ZZ!9U4pG5OE">
                    <field name="NUM">1</field>
                  </shadow>
                </value>
                <next>
                  <block type="sb_wait_musical" id="+OJ$G.*Q5kAedSU^-MeJ">
                    <field name="DURATION">2n</field>
                  </block>
                </next>
              </block>
            </next>
          </block>
        </next>
      </block>
    </statement>
  </block>
  <block type="sb_transport_set_bpm" id="/tH)3gh$iP~5uzs]cZPi" x="10" y="990">
    <field name="BPM">120</field>
    <next>
      <block type="procedures_callnoreturn" id="=bLrP-5sUrbkM?h.ttlb">
        <mutation name="verse"></mutation>
        <next>
          <block type="procedures_callnoreturn" id="[psJLAN)IIxwHp73YQW1">
            <mutation name="chorus"></mutation>
            <next>
              <block type="procedures_callnoreturn" id="VFS.CB#FFpT7%(`Fu0`%">
                <mutation name="verse"></mutation>
                <next>
                  <block type="procedures_callnoreturn" id="~5%%;zMDXxK?tA~!l]oJ">
                    <mutation name="chorus"></mutation>
                  </block>
                </next>
              </block>
            </next>
          </block>
        </next>
      </block>
    </next>
  </block>
</xml>