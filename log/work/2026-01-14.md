# 2026-01-14 工作日誌 (SynthBlockly)

## 主要異動

### 1. 系統熱鍵與 UI 優化
- **新增緊急停止熱鍵**：實作了 `Esc` (Escape) 鍵作為全域停止聲音 (Panic Stop) 的快速鍵，提升操作安全性。
- **Tooltip 更新**：同步更新了「執行」與「停止」按鈕的 Tooltip，加入 `(Ctrl+Enter)` 與 `(Esc)` 提示文字（支援中英文）。

### 2. ADSR 視覺化重構 (精確度提升)
- **改用線性時間映射**：移除了原本強制各階段最小佔用寬度的邏輯，改採與 Processing 版本一致的 `totalTime = A + D + R + 0.5` 比例計算座標。
- **修復極端值顯示**：解決了當 A=0 或 R=0 時無法精確表示垂直線條的問題，現在能真實反映瞬間起音與瞬間截斷的物理特性。
- **動畫同步**：更新了 Playhead 光點動畫邏輯，確保其移動軌跡與新的線性圖表完全吻合。

### 3. 工具箱 (Toolbox) 與積木外觀調整
- **分類整合**：將「音源控制」分類的積木全部移入「音源」分類中，並移除重複與分隔線，使介面更精簡。
- **顏色規範化**：
    - 統一「音源控制」積木顏色為音源類的綠色 (`SOUND_SOURCES_HUE`)。
    - **取樣音源區隔**：將 `sb_create_sampler_instrument` 積木顏色加深為 `#388E3C`，以區分合成器與取樣器。
- **分類排序調整**：將 `PC Keyboard` 分類移動至 `MIDI` 分類上方，優化使用頻率導向的排序。
- **積木歸類修正**：將誤放在 Serial 分類的「播放和弦」積木移回「演奏 (Performance)」分類。

## 異動檔案
- `SynthBlockly/js/ui/buttons.js`
- `SynthBlockly/js/ui/adsrVisualizer.js`
- `SynthBlockly/js/core/toolbox.js`
- `SynthBlockly/js/blocks/instruments_blocks.js`
- `SynthBlockly/js/blocks/sampler_blocks.js`
- `SynthBlockly/js/blocks/lang/zh-hant.js`
- `SynthBlockly/js/blocks/lang/en.js`
