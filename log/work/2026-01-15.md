# 2026-01-15 工作日誌 (SynthBlockly)

## 今日達成事項
- **效果器系統擴充**：
    - 在 `sb_setup_effect` 積木中新增 **Tremolo (顫音)** 效果器。
    - 完整串接翻譯 (en/zh-hant)、Blockly UI (updateShape_)、產生器 (Generators) 與 `audioEngine` (Tone.js)。
    - 重構 `sb_setup_effect` 的 `updateShape_` 函式，使用陣列遍歷清理 Input，提升程式碼簡潔度。
- **HelpUrl 全面修正**：
    - 遍歷所有自訂積木檔案 (`instruments_blocks.js`, `transport_blocks.js`, `melody_blocks.js`, `effects_blocks.js` 等)。
    - 修正 `setHelpUrl` 的回傳路徑，統一加上 `${import.meta.env.BASE_URL}`，確保在 Vite 的各種部署環境（如子目錄部署）下說明文件連結皆能正確開啟。
- **說明文件更新**：
    - 在 `effect_readme_zh-hant.html` 與 `effect_readme_en.html` 中同步加入 Tremolo 與 AutoPanner 的參數原理說明。
- **邏輯驗證**：
    - 確認 `adsrVisualizer.js` 的光點切換採用「最後觸發者優先」邏輯，在多音發奏環境下運作符合預期。

## 技術細節
- **Tremolo 實作**：使用 `new Tone.Tremolo(freq, depth).start()`，注意調變類效果器在 Tone.js 中通常需要呼叫 `.start()` 才會生效。
- **Vite 路徑處理**：在 `js/blocks/` 下的非元件檔案中存取靜態資源時，必須使用 `import.meta.env.BASE_URL` 拼接路徑，否則在生產環境（如 GitHub Pages）會抓不到 `public/docs/` 下的 HTML。

## 下一步建議
1. 繼續補全 `custom_sampler_readme` 中關於 JSON 格式的進階範例（例如如何處理多個力度層級的取樣）。
2. 考慮為 `audioEngine` 加入 `Limiter` 作為最後一級保護，防止使用者疊加過多樂器導致數位失真 (Clipping)。
