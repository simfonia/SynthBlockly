# SynthBlockly 專案檔案結構

本文件說明 SynthBlockly 專案的現代化模組架構。

- `synthblockly/`
  - `index.html`: Vite 專案主入口點，包含語系偵測邏輯。
  - `main.js`: Vite 進入點，載入 Tone.js 與 p5.js。
  - `styles.css`: 全域樣式，包含示波器與 ADSR 視覺化版面。
  - `vite.config.js`: 構建配置。
  - `public/`: 靜態資源（音訊樣本、說明文件、i18n 檔案）。
    - `docs/`: 積木說明文件 (HTML 格式，支援中英雙語)。
      - `performance_readme_*.html`: 演奏音符積木說明。
    - `locales/`: Blockly 核心語言包 (JSON)。
    - `samples/`: 音訊樣本庫（包含爵士鼓、小提琴與特殊音效 SFX）。
  - `js/`: 核心 JavaScript 代碼。
    - `app.js`: 應用程式啟動中心，負責初始化所有模組。
    - `core/`: 核心引擎與管理。
      - `audioEngine.js`: Tone.js 封裝，管理「音源」、效果鏈與旋律解析。
      - `blocklyManager.js`: Blockly 工作區管理、動態積木註冊與程式碼產生邏輯。
      - `midiEngine.js`: 處理外部 MIDI 設備通訊。
      - `serialEngine.js`: 處理序列埠設備通訊。
      - `toolbox.js`: 定義三位一體專業工具箱 (Sources, Performance, Control)。
    - `ui/`: 介面組件。
      - `adsrVisualizer.js`: Canvas 實作的 ADSR 包絡線預覽與動態光點。
      - `visualizer.js`: p5.js 實作的即時示波器。
      - `buttons.js`: 工具列按鈕邏輯。
      - `logger.js`: 多語系日誌系統。
      - `keyboardController.js`: PC 鍵盤演奏邏輯。
      - `resizer.js`: 介面佈局調整。
      - `uiManager.js`: UI 翻譯與效果管理。
      - `helpModal.js`: 說明視窗與文件顯示邏輯。
    - `blocks/`: 積木與產生器定義。
      - `index.js`: 積木註冊入口點。
      - `instruments_blocks.js` / `_generators.js`: 標準音源與參數控制。
      - `instruments_custom_wave_blocks.js` / `_generators.js`: 自訂波形 (加法合成) 音源。
      - `sampler_blocks.js` / `_generators.js`: 取樣器音源 (內建/自訂)。
      - `effects_blocks.js` / `_generators.js`: 音訊效果器。
      - `melody_blocks.js` / `_generators.js`: 旋律清單演奏。
      - `midi_blocks.js` / `_generators.js`: MIDI 事件處理。
      - `serial_blocks.js` / `_generators.js`: 序列埠事件處理。
      - `keyboard_blocks.js` / `_generators.js`: PC 鍵盤對應。
      - `transport_blocks.js` / `_generators.js`: 播放控制 (BPM, Loop)。
      - `noise_blocks.js` / `_generators.js`: 噪音產生器。
      - `sfx_blocks.js` / `_generators.js`: 環境音效播放。
      - `math_blocks.js` / `_generators.js`: 數學運算擴充。
      - `lang/`: 自訂語言字串定義 (en.js, zh-hant.js)。
    - `plugins/`: Blockly 欄位插件（如多行文字輸入框）。
    - `log/`: 開發紀錄。
      - `todo.md`: 任務清單與待辦事項。
      - `work/`: 每日開發工作日誌 (例如 `yyyy-mm-dd.md`)。
  